\datos{color}{}{}

\section*{Anexo: código}
\addcontentsline{toc}{section}{Anexo: código}

\subsection*{Estudio cinemático}
\addcontentsline{toc}{subsection}{Estudio cinemático}

\subsubsection*{Cinemática directa con parámetros DH clásicos}
\lstinputlisting[
    caption={Código Matlab para la cinemática directa con parámetros DH clásicos.},
    label={lst:dh},
    breaklines=true,
    breakatwhitespace=true
]{Matlab/dh.m}

\lstinputlisting[
    caption={Salida numérica de la cinemática directa DH clásica.},
    label={lst:dh_salida},
    breaklines=true,
    breakatwhitespace=true,
    float=false
]{Matlab/dh_salida.txt}

\subsubsection*{Cinemática directa con parámetros DH modificados}
\lstinputlisting[
    caption={Código Matlab para la cinemática directa con parámetros DH modificados.},
    label={lst:dh_mod},
    breaklines=true,
    breakatwhitespace=true
]{Matlab/dh_mod.m}

\lstinputlisting[
    caption={Salida numérica de la cinemática directa DH modificada.},
    label={lst:dh_mod_salida},
    breaklines=true,
    breakatwhitespace=true
]{Matlab/dh_mod_salida.txt}

\subsubsection*{Cinemática inversa}
\lstinputlisting[
    caption={Código Matlab para obtener las ecuaciones de posición y orientación con parámetros DH modificados.},
    label={lst:ik},
    breaklines=true,
    breakatwhitespace=true
]{Matlab/ik.m}

\lstinputlisting[
    caption={Cálculo de la cinemática inversa del robot \textit{UFactory xArm6}.},
    label={lst:ik_nr},
    breaklines=true,
    breakatwhitespace=true
]{Matlab/ik_nr.m}

\lstinputlisting[
    caption={Salida del cálculo de la cinemática inversa del robot \textit{UFactory xArm6}.},
    label={lst:ik_nr_salida},
    breaklines=true,
    breakatwhitespace=true
]{Matlab/ik_nr_salida.m}

\subsubsection*{Cinemática diferencial y Jacobiano}
\lstinputlisting[
    caption={Cálculo de la cinemática diferencial y Jacobiano mediante parámetros DH modificados.},
    label={lst:jac},
    breaklines=true,
    breakatwhitespace=true
]{Matlab/jac.m}

\subsubsection*{Generación de trayectorias}
\lstinputlisting[
    caption={Generación de trayectoria articular realizable.},
    label={lst:traj},
    breaklines=true,
    breakatwhitespace=true
]{Matlab/traj.m}
\lstinputlisting[
    caption={Salida de la generación de trayectoria articular realizable.},
    label={lst:traj_salida},
    breaklines=true,
    breakatwhitespace=true
]{Matlab/traj_salida.m}

\subsubsection*{Control cinemático}
\lstinputlisting[
    caption={Control cinemático completo.},
    label={lst:cin_control},
    breaklines=true,
    breakatwhitespace=true
]{Matlab/cin_control.m}
\lstinputlisting[
    caption={Salida del control cinemático completo.},
    label={lst:cin_control2},
    breaklines=true,
    breakatwhitespace=true
]{Matlab/cin_control_salida.m}

\clearpage
\subsection*{Estudio dinámico}
\addcontentsline{toc}{subsection}{Estudio dinámico}

\lstinputlisting[
    caption={Momentos de inercia del los eslabones del robot en estudio.},
    label={lst:inercia},
    breaklines=true,
    breakatwhitespace=true
]{Matlab/inercias.txt}

\lstinputlisting[
    caption={Cálculo de pares de los actuadores.},
    label={lst:din_control},
    breaklines=true,
    breakatwhitespace=true
]{Matlab/din_control.m}
\lstinputlisting[
    caption={Salida del cálculo de pares de los actuadores.},
    label={lst:din_control2},
    breaklines=true,
    breakatwhitespace=true
]{Matlab/din_control_salida.m}

\clearpage
\subsection*{Controlador}
\addcontentsline{toc}{subsection}{Controlador}

\lstinputlisting[
    caption={Programa principal.},
    label={lst:main},
    breaklines=true,
    breakatwhitespace=true
]{Matlab/main.m}

\lstinputlisting[
    caption={Modelado.},
    label={lst:model},
    breaklines=true,
    breakatwhitespace=true
]{Matlab/model.m}

\lstinputlisting[
    caption={Planificador cinemático.},
    label={lst:kin_planner},
    breaklines=true,
    breakatwhitespace=true
]{Matlab/kinematic_planner.m}

\lstinputlisting[
    caption={Replanificador dinámico.},
    label={lst:dyn_replanner},
    breaklines=true,
    breakatwhitespace=true
]{Matlab/dynamic_replanner.m}

\lstinputlisting[
    caption={Controlador.},
    label={lst:controller},
    breaklines=true,
    breakatwhitespace=true
]{Matlab/controller.m}


\clearpage
\subsection*{Programación básica de MoveIt2 con un nodo en C++}
\addcontentsline{toc}{subsection}{Programación básica de MoveIt2 con un nodo en C++}
\lstinputlisting[
    style=cppstyle,
    caption={Nodo C++ para controlar el robot con MoveIt2.},
    label={lst:node_moveit},
    breaklines=true,
    breakatwhitespace=true
]{Matlab/xarm6_action_client.cpp}